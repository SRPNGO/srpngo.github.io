<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="Shortcut Icon" href="icon/SRPNlogo.svg" />
    <link
      rel="Shortcut Icon"
      href="https://s1.imagehub.cc/images/2024/02/20/79130709905453796af9c9c876e6cb90.png" />
    <meta name="description" content="æ˜Ÿçƒé˜ä»£è¡¨ä½œ" />
    <meta name="author" content="Nsakrty" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ˜Ÿçƒé˜çš„ä»£è¡¨ä½œå“</title>
    <link rel="stylesheet" href="css/basic.css" />
    <style>
      body {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }

      .container {
        background-color: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
      }

      .work-item {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        background-color: #fafafa;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
      }

      .work-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .work-title {
        font-size: 18px;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 8px;
      }

      .work-title a {
        text-decoration: none;
        color: inherit;
      }

      .work-title a:hover {
        color: #3498db;
      }

      .work-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: #666;
      }

      .author {
        font-weight: bold;
      }

      .class-tag {
        background-color: #3498db;
        color: white;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 12px;
        white-space: nowrap;
      }

      .hot-tag {
        background-color: #e74c3c;
        color: white;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 12px;
        white-space: nowrap;
      }

      .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 30px;
        gap: 10px;
      }

      .pagination button {
        padding: 8px 15px;
        border: 1px solid #ddd;
        background-color: white;
        color: #333;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      .pagination button:hover:not(:disabled) {
        background-color: #f0f0f0;
      }

      .pagination button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .pagination .active {
        background-color: #3498db;
        color: white;
        border-color: #3498db;
      }

      .page-info {
        margin: 20px 0;
        text-align: center;
        color: #666;
      }

      .no-data {
        text-align: center;
        color: #999;
        font-style: italic;
        padding: 40px;
      }
    </style>
  </head>

  <body>
    <script>
      const sortMode = ["time", "hot", "author", "class"];
      const sortModeText = ["æ—¶é—´æ’åº", "çƒ­åº¦æ’åº", "ä½œè€…æ’åº", "ç±»å‹æ’åº"];
      let currentSortMode = sortMode[0];
      function changeSort() {
        const currentIndex = sortMode.indexOf(currentSortMode);
        currentSortMode = sortMode[(currentIndex + 1) % sortMode.length];
        document.querySelector("button").textContent =
          sortModeText[(currentIndex + 1) % sortMode.length];
        worksPagination.sort(currentSortMode);
      }
      function parseTimeString(timeStr) {
        if (!timeStr) return 0;
        // æŠŠæ‰€æœ‰éæ•°å­—å’Œéå­—æ¯çš„åˆ†éš”ç¬¦ç»Ÿä¸€æˆ'-'
        const normalized = timeStr.trim().replace(/[./]/g, "-");
        const timestamp = Date.parse(normalized);
        return isNaN(timestamp) ? 0 : timestamp;
      }
    </script>
    <div class="container">
      <h1>æ˜Ÿçƒé˜ä»£è¡¨ä½œå“</h1>
      <button onclick="changeSort()">æ—¶é—´æ’åº</button>
      <div class="page-info">
        <span id="pageInfo"></span>
      </div>

      <div id="worksList"></div>

      <div class="pagination" id="pagination"></div>
    </div>
    <hr />
    <p>æ•°æ®ä»åœ¨æ›´æ–°ä¸­...å¿«æ¥å‘æˆ‘(Nsakrty)æŠ•ç¨¿ä½ è®¤ä¸ºçš„â€œæ˜Ÿçƒé˜ä»£è¡¨ä½œå“â€å§~</p>
    <p>
      ä¸Šæ¬¡æ›´æ–°ï¼š
      <a id="sumtime"></a>
    </p>
    <p><a href="./index.html">è¿”å›ä¸»ç•Œé¢</a></p>
    <script src="./script/update.js"></script>

    <script>
      let works = [
        {
          title: "ã€Šé€ŸèƒŒå…ƒç´ å‘¨æœŸè¡¨40ä½ã€‹",
          author: "Earth-2",
          class: "çŸ¥è¯†-åŒ–å­¦",
          hot: "ğŸ”¥ğŸ”¥ğŸ”¥",
          time: "2022.11.30",
        },
        {
          title: "æ°´å¾ªç¯",
          url: "https://v.douyin.com/CeinsT8D/ 08/01",
          author: "Maugfy",
          class: "çŸ¥è¯†-åœ°ç†",
          hot: "ğŸ”¥ğŸ”¥ğŸ”¥",
          time: "2024.10.26",
        },
        {
          title: "æµ·å²¸åœ°è²Œ",
          url: "https://v.douyin.com/b9eDz9SplFg",
          author: "Maugfy",
          class: "çŸ¥è¯†-åœ°ç†",
          hot: "ğŸ”¥ğŸ”¥ğŸ”¥",
          time: "2024.12.13",
        },
        {
          title: '"ç‰©ç†ï¼Ÿ"',
          url: "https://v.douyin.com/qynZzR1vF-w/",
          author: "Acubens-A",
          class: "çŸ¥è¯†-ç‰©ç†",
          hot: "ğŸ”¥ğŸ”¥ğŸ”¥",
          time: "2025.01.21",
        },
        {
          title: '"å°æ›²ä¸€å“ï¼Œç†ç§‘ç™»åœº"',
          url: "https://v.douyin.com/LgB_GJ0mjp4/",
          author: "Acubens-A & Nsakrty",
          class: "çŸ¥è¯†-æ•°ç†",
          hot: "ğŸ”¥ğŸ”¥ğŸ”¥",
          time: "2025.03.09",
        },
        {
          title: "åœ°ç†â€”â€”æˆ‘å›½æ°”å€™",
          url: "https://v.douyin.com/faiixYBJxBg/",
          author: "æ°´ç›Š",
          class: "çŸ¥è¯†-åœ°ç†",
          hot: "ğŸ”¥ğŸ”¥ğŸ”¥",
          time: "2025.05.16",
        },
        {
          title: "ã€Šâš¡ï¸å¤©ä½“ç‰©ç†âš¡ï¸ã€‹",
          url: "https://v.douyin.com/humgoXBfPjY/",
          author: "å¤©ç™½",
          class: "çŸ¥è¯†-ç‰©ç†",
          hot: "ğŸ”¥ğŸ”¥",
          time: "2024.11.17",
        },
        {
          title: "Kå‹æ’æ˜Ÿçš„ç”Ÿå‘½å†ç¨‹ ",
          url: "https://b23.tv/dANYlxz",
          author: "Earth-2",
          class: "çŸ¥è¯†-å¤©æ–‡",
          // hot: "",
          time: "2021.08.27",
        },
        {
          title: "åŠ›å­¦ï¼ˆpart 1ï¼‰",
          url: "https://v.douyin.com/ULix-mH6tJo/",
          author: "XF",
          class: "çŸ¥è¯†-ç‰©ç†",
          hot: "ğŸ”¥ğŸ”¥",
          time: "2025.03.08",
        },
        {
          title: "åœ°çƒï¼šè‰",
          url: "https://v.douyin.com/o1TRDDyaX-g/",
          author: "Nsakrty",
          class: "æ˜Ÿçƒ-å¨±ä¹",
          hot: "ğŸ”¥ğŸ”¥",
          time: "2020.12.14",
        },
        {
          title: "SRPNå±æœº",
          url: "https://v.douyin.com/rjnK4cY5yoE/",
          author: "å¤§Qæ˜¯åªå±‘è¡Œæ˜Ÿ",
          class: "è½¬è½½",
          time: "2024.06.29",
        },
        {
          title: "åœŸåœ°ç›ç¢±åŒ–æˆå› ",
          url: "https://v.douyin.com/bYnhSkE-QVw/",
          author: "Maugfy",
          class: "çŸ¥è¯†-åœ°ç†",
          hot: "ğŸ”¥ğŸ”¥ğŸ”¥",
          time: "2026.01.02",
        },
      ];
    </script>
    <script>
      class WorksPagination {
        constructor(data, itemsPerPage = 10) {
          this.data = data;
          this.originalData = [...data]; // ä¿å­˜åŸå§‹æ•°æ®é¡ºåº
          this.itemsPerPage = itemsPerPage;
          this.currentPage = 1;
          this.totalPages = Math.ceil(data.length / itemsPerPage);
          this.sort("time");
          this.init();
        }

        init() {
          this.render();
          this.renderPagination();
        }

        getCurrentPageData() {
          const startIndex = (this.currentPage - 1) * this.itemsPerPage;
          const endIndex = startIndex + this.itemsPerPage;
          return this.data.slice(startIndex, endIndex);
        }

        render() {
          const worksList = document.getElementById("worksList");
          const pageInfo = document.getElementById("pageInfo");
          const currentData = this.getCurrentPageData();

          // æ›´æ–°é¡µé¢ä¿¡æ¯
          const startItem = (this.currentPage - 1) * this.itemsPerPage + 1;
          const endItem = Math.min(
            this.currentPage * this.itemsPerPage,
            this.data.length,
          );
          pageInfo.textContent = `æ˜¾ç¤º ${startItem}-${endItem} é¡¹ï¼Œå…± ${this.data.length} é¡¹`;

          if (currentData.length === 0) {
            worksList.innerHTML = '<div class="no-data">æš‚æ— æ•°æ®</div>';
            return;
          }

          worksList.innerHTML = currentData
            .map(
              (work) => `
                    <div class="work-item">
                        <div class="work-title">
                            <a href="${work.url ?? ""}" target="_blank">${
                              work.title ?? ""
                            }</a>
                        </div>
                        <div class="work-meta">
                            <div>
                                <span class="author">ä½œè€…ï¼š${
                                  work.author ?? "æœªçŸ¥"
                                }</span>
                                <span class="time"><br>${work.time ?? ""}</span>
                            </div>
                            <div>
                                <span class="class-tag">${
                                  work.class ?? "æœªåˆ†ç±»"
                                }</span>
                                <span class="hot-tag">${
                                  work.hot ?? "æœªåˆ†ç±»"
                                }</span>
                            </div>
                        </div>
                    </div>
                `,
            )
            .join("");
        }

        renderPagination() {
          const pagination = document.getElementById("pagination");

          if (this.totalPages <= 1) {
            pagination.innerHTML = "";
            return;
          }

          let paginationHTML = "";

          // ä¸Šä¸€é¡µæŒ‰é’®
          paginationHTML += `
                    <button ${this.currentPage === 1 ? "disabled" : ""} 
                            onclick="worksPagination.goToPage(${
                              this.currentPage - 1
                            })">
                        ä¸Šä¸€é¡µ
                    </button>
                `;

          // é¡µç æŒ‰é’®
          const startPage = Math.max(1, this.currentPage - 2);
          const endPage = Math.min(this.totalPages, this.currentPage + 2);

          if (startPage > 1) {
            paginationHTML += `<button onclick="worksPagination.goToPage(1)">1</button>`;
            if (startPage > 2) {
              paginationHTML += `<span>...</span>`;
            }
          }

          for (let i = startPage; i <= endPage; i++) {
            paginationHTML += `
                        <button class="${
                          i === this.currentPage ? "active" : ""
                        }" 
                                onclick="worksPagination.goToPage(${i})">
                            ${i}
                        </button>
                    `;
          }

          if (endPage < this.totalPages) {
            if (endPage < this.totalPages - 1) {
              paginationHTML += `<span>...</span>`;
            }
            paginationHTML += `<button onclick="worksPagination.goToPage(${this.totalPages})">${this.totalPages}</button>`;
          }

          // ä¸‹ä¸€é¡µæŒ‰é’®
          paginationHTML += `
                    <button ${
                      this.currentPage === this.totalPages ? "disabled" : ""
                    } 
                            onclick="worksPagination.goToPage(${
                              this.currentPage + 1
                            })">
                        ä¸‹ä¸€é¡µ
                    </button>
                `;

          pagination.innerHTML = paginationHTML;
        }
        sort(type) {
          if (!type) {
            // æ¢å¤åŸå§‹é¡ºåº
            return;
          } else if (type === "time") {
            this.data.sort((a, b) => {
              return parseTimeString(b.time) - parseTimeString(a.time);
            });
          } else if (type === "hot") {
            // æŒ‰çƒ­åº¦å€’åºæ’åºï¼ˆæ•°ç«è‹—æ•°é‡ï¼‰
            this.data.sort((a, b) => {
              const getHotLevel = (hot) => {
                if (!hot) return -1; // æ²¡æœ‰hotå±æ€§çš„æ’åˆ°æœ€å
                const matches = hot.match(/ğŸ”¥/g);
                return matches ? matches.length : -1; // æ²¡æœ‰ç«è‹—çš„ä¹Ÿæ’åˆ°æœ€å
              };
              return getHotLevel(b.hot) - getHotLevel(a.hot);
            });
          } else if (type === "author") {
            // æŒ‰ä½œè€…åç§°å­—æ¯é¡ºåºæ’åº
            this.data.sort((a, b) =>
              (a.author || "").localeCompare(b.author || ""),
            );
          } else if (type === "class") {
            // æŒ‰ç¬¬ä¸€çº§åˆ†ç±»ï¼ˆ-ä¹‹å‰ï¼‰å­—æ¯é¡ºåºæ’åº
            this.data.sort((a, b) => {
              const classA = a.class?.split("-")[0] || "";
              const classB = b.class?.split("-")[0] || "";
              return classA.localeCompare(classB);
            });
          }

          // é‡ç½®åˆ°ç¬¬ä¸€é¡µå¹¶é‡æ–°æ¸²æŸ“
          this.currentPage = 1;
          this.init();
        }

        goToPage(page) {
          if (page < 1 || page > this.totalPages || page === this.currentPage) {
            return;
          }

          this.currentPage = page;
          this.render();
          this.renderPagination();

          // æ»šåŠ¨åˆ°é¡¶éƒ¨
          window.scrollTo({ top: 0, behavior: "smooth" });
        }
      }
    </script>
    <script>
      // åˆå§‹åŒ–åˆ†é¡µå™¨ï¼ˆæ¯é¡µæ˜¾ç¤º10æ¡ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ï¼‰
      const worksPagination = new WorksPagination(works, 10);
    </script>
    <script>
      const busuanzi = document.createElement("script");
      busuanzi.src = "https://cdn.busuanzi.cc/busuanzi/3.6.9/busuanzi.min.js";
      busuanzi.defer = true;
      const local =
        window.location.origin.includes("localhost") ||
        window.location.origin.includes("127.0.0.1") ||
        window.location.origin.includes("file://");
      if (!local) {
        document.head.appendChild(busuanzi);
      }
    </script>
  </body>
</html>
